(()=>{document.addEventListener("DOMContentLoaded",function(){let l=document.querySelectorAll(".video-slide"),k=document.querySelectorAll(".indicator"),z=document.getElementById("heroPrevBtn"),U=document.getElementById("heroNextBtn"),A=document.querySelector(".progress-bar"),o=0,c=!1,x,f,L=0,m=0,h=!1,t=document.getElementById("videoTooltip"),d=document.querySelector(".video-slider-container");function Y(){l.forEach(e=>{e.classList.remove("active");let i=e.querySelector("video");i&&(i.pause(),i.currentTime=0)}),k.forEach(e=>{e.classList.remove("active")})}function w(e){Y(),e>=l.length?o=0:e<0?o=l.length-1:o=e;let i=l[o],n=i.querySelector("video");i.classList.add("active"),k[o].classList.add("active"),L=parseInt(i.dataset.duration)||15,m=0,R(),n&&n.play().then(()=>{c=!0,h=!0,a(),u()}).catch(r=>{console.log("Video autoplay failed:",r),o===0&&!h?(c=!1,Z()):(a(),u())})}function a(){clearInterval(f),f=setInterval(()=>{m+=.1;let e=m/L*100;A.style.width=Math.min(e,100)+"%",m>=L&&clearInterval(f)},100)}function R(){clearInterval(f),A.style.width="0%",m=0}function u(){clearInterval(x),x=setTimeout(()=>{p()},L*1e3)}function p(){w(o+1)}function V(){w(o-1)}function B(){clearInterval(x),clearInterval(f);let e=l[o].querySelector("video");e&&e.pause(),c=!1,t&&h&&(t.innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 18V6l8 6-8 6Z"/></svg>')}function T(){if(!c){let e=l[o].querySelector("video");e&&e.play().then(()=>{c=!0,a(),u()}).catch(()=>{a(),u()}),t&&h&&(t.textContent="Videoyu durdurmak i\xE7in \xE7ift t\u0131klay\u0131n",setTimeout(()=>{t.innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6"/></svg>'},3e3))}}U.addEventListener("click",()=>{p()}),z.addEventListener("click",()=>{V()}),k.forEach((e,i)=>{e.addEventListener("click",()=>{w(i)})}),d.addEventListener("dblclick",B),d.addEventListener("click",T),l.forEach((e,i)=>{let n=e.querySelector("video");n&&(n.addEventListener("ended",()=>{i===o&&p()}),n.addEventListener("timeupdate",()=>{i===o&&n.duration>0&&n.currentTime/n.duration*100>=99&&setTimeout(()=>{i===o&&p()},500)}))}),document.addEventListener("keydown",e=>{e.key==="ArrowLeft"?V():e.key==="ArrowRight"?p():e.key===" "&&(e.preventDefault(),c?B():T())}),document.addEventListener("visibilitychange",()=>{document.hidden?B():T()}),window.addEventListener("resize",()=>{let e=l[o].querySelector("video");e&&(e.style.width="100%",e.style.height="100%")});function Z(){$();let e=()=>{h=!0;let n=l[o].querySelector("video");F(),n&&n.play().then(()=>{c=!0,a(),u()}).catch(()=>{a(),u()}),document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e)};document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}function $(){t&&d&&(t.classList.remove("hidden"),t.classList.add("visible"),d.addEventListener("mousemove",P),d.addEventListener("mouseenter",O),d.addEventListener("mouseleave",H))}function K(){t&&d&&(t.classList.remove("visible"),t.classList.add("hidden"),d.removeEventListener("mousemove",P),d.removeEventListener("mouseenter",O),d.removeEventListener("mouseleave",H))}function F(){t&&(t.textContent="Videoyu durdurmak i\xE7in \xE7ift t\u0131klay\u0131n",setTimeout(()=>{t.innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6"/></svg>'},3e3))}function P(e){if(t){if(e.target.closest(".hero-content")){t.classList.remove("visible"),t.classList.add("hidden");return}else t.classList.remove("hidden"),t.classList.add("visible");let n=8,r=-25;t.style.left=e.clientX+n+"px",t.style.top=e.clientY+r+"px"}}function O(e){if(t){if(e.target.closest(".hero-content"))return;t.classList.remove("hidden"),t.classList.add("visible")}}function H(){t&&(t.classList.remove("visible"),t.classList.add("hidden"))}w(0);let b=document.getElementById("referenceItemsWrapper");if(b){let E=function(){let s=window.innerWidth;return s>=1400?6:s>=1200?5:s>=992?4:s>=768?3:s>=576?2:1},G=function(){if(n.length===0)return 0;let s=E(),I=n[0].offsetWidth,C=window.getComputedStyle(b),N=parseInt(C.gap)||0;return I+N},S=function(){g=E(),v=Math.max(0,n.length-g);let s=G(),q=r*s;b.style.transform=`translateX(-${q}px)`,e.disabled=r===0,i.disabled=r>=v},W=function(){r<v?r++:r=0,S()},J=function(){r>0?r--:r=v,S()},X=function(){y&&clearInterval(y),y=setInterval(W,4e3)},j=function(){clearInterval(y)},e=document.getElementById("prevBtn"),i=document.getElementById("nextBtn"),n=document.querySelectorAll(".reference-item"),r=0,g=E(),v=Math.max(0,n.length-g),y;i&&i.addEventListener("click",W),e&&e.addEventListener("click",J);let D=document.querySelector(".referances-section");if(D){let s={root:null,rootMargin:"0px",threshold:.5};new IntersectionObserver(I=>{I.forEach(C=>{C.isIntersecting?X():j()})},s).observe(D)}let M=document.querySelector(".references-slider-container");M&&(M.addEventListener("mouseenter",j),M.addEventListener("mouseleave",X)),window.addEventListener("resize",()=>{g=E(),v=Math.max(0,n.length-g),r=Math.min(r,v),S()}),n.length>0&&S()}});})();
